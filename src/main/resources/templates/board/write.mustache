{{>layouts/header}}

<form class="container" action="/api/board/write" method="post">
    <div style="display: flex;">
        <div class="bg-image p-5 text-center shadow-1-strong rounded mb-5 text-white"
             style="flex: 1;background-image: url('/images/람따.jpg'); height:30vh; background-repeat:no-repeat; background-size:cover;">

        </div>
        <p style="flex: 5; text-align: center;"><button style="font-size: 50px; margin-top: 80px;" type="button" class="btn btn-primary disabled">건전한 글 작성 부탁드립니다</button></p>
        <div class="bg-image p-5 text-center shadow-1-strong rounded mb-5 text-white"
             style="flex: 1; background-image: url('/images/띠모따봉.jpg'); height:30vh; background-repeat:no-repeat; background-size:cover;">
        </div>
    </div>
    <div class="mb-3">
        <label class="form-label">아이디</label>
        <input type="text" class="form-control" id="nickname">
    </div>
    <div class="mb-3">
        <label class="form-label">제목</label>
        <input type="text" class="form-control" id="title">
    </div>
    <div class="mb-3">
        <label class="form-label">내용</label>
        <textarea class="form-control" rows="3" id="content"></textarea>
    </div>
    <button type="button" class="btn btn-primary" id="submit-button">Submit</button>
    <a href ="/board/free">Back</a>
</form>
<script>
    {
        const writeBtn = document.querySelector("#submit-button");

        writeBtn.addEventListener('click', function() {
            const article = {
                nickname : document.querySelector("#nickname").value,
                title : document.querySelector("#title").value,
                content : document.querySelector("#content").value
            };

            console.log(article);

            const url = "/api/board/write";
            fetch(url, {
                method: "post",
                body: JSON.stringify(article),
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(response => {
                const msg = (response.ok) ? "새 글이 등록되었습니다." : "글 생성 실패";
                alert(msg);

                window.location.href='/board/free';
            })

        })
    }
</script>